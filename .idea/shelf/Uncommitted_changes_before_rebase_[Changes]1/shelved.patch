Index: improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/ChatModuleHandle.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package io.github.toberocat.improvedfactions.modules.chat.handles\n\nimport io.github.toberocat.improvedfactions.modules.chat.ChatMode\nimport java.util.UUID\n\ninterface ChatModuleHandle {\n    fun setChatMode(playerId: UUID, chatMode: ChatMode)\n    fun getChatMode(playerId: UUID): ChatMode\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/ChatModuleHandle.kt b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/ChatModuleHandle.kt
--- a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/ChatModuleHandle.kt	(revision 334f0f846e51cbb04c50096b8e8bd047338df90f)
+++ b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/ChatModuleHandle.kt	(date 1725812101489)
@@ -6,4 +6,8 @@
 interface ChatModuleHandle {
     fun setChatMode(playerId: UUID, chatMode: ChatMode)
     fun getChatMode(playerId: UUID): ChatMode
+    fun spy(playerId: UUID)
+    fun unspy(playerId: UUID)
+    fun isSpying(playerId: UUID): Boolean
+    fun getSpyingPlayers(): Set<UUID>
 }
\ No newline at end of file
Index: improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/DummyHandles.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package io.github.toberocat.improvedfactions.modules.chat.handles\n\nimport io.github.toberocat.improvedfactions.modules.chat.ChatMode\nimport java.util.*\n\nclass DummyChatModuleHandle: ChatModuleHandle {\n    override fun setChatMode(playerId: UUID, chatMode: ChatMode) = Unit\n\n    override fun getChatMode(playerId: UUID) = ChatMode.GLOBAL\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/DummyHandles.kt b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/DummyHandles.kt
--- a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/DummyHandles.kt	(revision 334f0f846e51cbb04c50096b8e8bd047338df90f)
+++ b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/handles/DummyHandles.kt	(date 1725812101925)
@@ -7,4 +7,10 @@
     override fun setChatMode(playerId: UUID, chatMode: ChatMode) = Unit
 
     override fun getChatMode(playerId: UUID) = ChatMode.GLOBAL
+    override fun spy(playerId: UUID) = Unit
+
+    override fun unspy(playerId: UUID) = Unit
+
+    override fun isSpying(playerId: UUID) = false
+    override fun getSpyingPlayers(): Set<UUID> = emptySet()
 }
\ No newline at end of file
Index: improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/impl/ChatModuleHandleImpl.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package io.github.toberocat.improvedfactions.modules.chat.impl\n\nimport io.github.toberocat.improvedfactions.modules.chat.ChatMode\nimport io.github.toberocat.improvedfactions.modules.chat.handles.ChatModuleHandle\nimport java.util.*\n\nclass ChatModuleHandleImpl : ChatModuleHandle {\n    private val map: MutableMap<UUID, ChatMode> = mutableMapOf()\n    override fun setChatMode(playerId: UUID, chatMode: ChatMode) {\n        map[playerId] = chatMode\n    }\n\n    override fun getChatMode(playerId: UUID): ChatMode = map[playerId] ?: ChatMode.GLOBAL\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/impl/ChatModuleHandleImpl.kt b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/impl/ChatModuleHandleImpl.kt
--- a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/impl/ChatModuleHandleImpl.kt	(revision 334f0f846e51cbb04c50096b8e8bd047338df90f)
+++ b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/impl/ChatModuleHandleImpl.kt	(date 1725812101934)
@@ -6,9 +6,23 @@
 
 class ChatModuleHandleImpl : ChatModuleHandle {
     private val map: MutableMap<UUID, ChatMode> = mutableMapOf()
+    private val spyingPlayers: MutableSet<UUID> = mutableSetOf()
+
     override fun setChatMode(playerId: UUID, chatMode: ChatMode) {
         map[playerId] = chatMode
     }
 
     override fun getChatMode(playerId: UUID): ChatMode = map[playerId] ?: ChatMode.GLOBAL
+
+    override fun spy(playerId: UUID) {
+        spyingPlayers.add(playerId)
+    }
+
+    override fun unspy(playerId: UUID) {
+        spyingPlayers.remove(playerId)
+    }
+
+    override fun isSpying(playerId: UUID) = spyingPlayers.contains(playerId)
+
+    override fun getSpyingPlayers() = spyingPlayers
 }
\ No newline at end of file
Index: improved-factions/src/main/resources/plugin.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>name: ImprovedFactions\nversion: '${version}'\nmain: io.github.toberocat.improvedfactions.ImprovedFactionsPlugin\napi-version: '1.18'\nsoftdepend: [ PlaceholderAPI, dynmap, GuiEngine ]\nauthor: Tobero\ncommands:\n  factions:\n    aliases: [ \"f\", \"fac\", \"faction\" ]\npermissions:\n  factions.updatechecker:\n    default: op\n  factions:\n    default: true\n  factions.info:\n    default: true\n  factions.create:\n    default: true\n  factions.join:\n    default: true\n  factions.delete:\n    default: true\n  factions.icon:\n    default: true\n  factions.invite:\n    default: true\n  factions.invites:\n    default: true\n  factions.invitediscard:\n    default: true\n  factions.inviteaccept:\n    default: true\n  factions.leave:\n    default: true\n  factions.rename:\n    default: true\n  factions.claim:\n    default: true\n  factions.unclaim:\n    default: true\n  factions.help:\n    default: true\n  factions.rank:\n    default: true\n  factions.rank.assign:\n    default: true\n  factions.rank.create:\n    default: true\n  factions.rank.default:\n    default: true\n  factions.rank.delete:\n    default: true\n  factions.rank.edit:\n    default: true\n  factions.rank.set:\n    default: true\n  factions.kick:\n    default: true\n  factions.ban:\n    default: true\n  factions.unban:\n    default: true\n  factions.members:\n    default: true\n  factions.transferowner:\n    default: true\n  factions.power:\n    default: true\n  factions.wilderness:\n    default: true\n  factions.home:\n    default: true\n  factions.sethome:\n    default: true\n  factions.chat:\n    default: true\n  factions.map:\n    default: true\n  factions.zone:\n    default: op\n  factions.bypass:\n    default: op\n  factions.force:\n    default: op\n  factions.force.join:\n    default: op\n  factions.force.unclaim:\n    default: op\n  factions.zone.claim:\n    default: op\n  factions.zone.unclaim:\n    default: op\n  factions.reload:\n    default: op\n  factions.power.set:\n    default: op\n  factions.bypass.usage-limits.*:\n    default: op\n  factions.bypass.usage-limits.wilderness:\n    default: op
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/improved-factions/src/main/resources/plugin.yml b/improved-factions/src/main/resources/plugin.yml
--- a/improved-factions/src/main/resources/plugin.yml	(revision 334f0f846e51cbb04c50096b8e8bd047338df90f)
+++ b/improved-factions/src/main/resources/plugin.yml	(date 1725812101966)
@@ -92,6 +92,8 @@
     default: op
   factions.reload:
     default: op
+  factions.spy:
+    default: op
   factions.power.set:
     default: op
   factions.bypass.usage-limits.*:
Index: improved-factions/src/main/resources/languages/messages_en.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>base.action.possible-values={prefix} <green>Possible values: <yellow>{values}</yellow></green>\nbase.action.required-argument={prefix} <green>Please enter the argument <hover:show_text:'{description}'><yellow>{usage}</yellow></hover> in chat</green>\nbase.action.try-again={prefix} <red>Error: This parameter is not allowed. Please try again</red>\nbase.boss-bars.raidable=<red>Raidable</red>\nbase.boss-bars.siege=<red>Siege({participants}): <yellow>{x}, {z}, {world}</yellow></red>\nbase.claim-faction-territory.subtitles.unprotected=<red>Raidable</red>\nbase.claim-faction-territory=<yellow>{faction}</yellow>\nbase.claim.protected={prefix} <red>This chunk has been claimed, and you aren't permitted to interact with it</red>\nbase.command.args.banned-player=Provide the name of a banned player\nbase.command.args.bool=Provide a boolean value. It can be true or false\nbase.command.args.claim-radius=Provide a radius for a square\nbase.command.args.expected-number={prefix} <red>Error: Expected a whole number</red>\nbase.command.args.faction-member=Provide a faction member you have permission to manage\nbase.command.args.faction-name=Provide a faction name. It may contain spaces\nbase.command.args.faction=Provide a faction\nbase.command.args.fallback-rank=The fallback rank is optional. If provided, all players having this rank will be placed back to this one\nbase.command.args.help=Optionally, only show usage and description for this specific command\nbase.command.args.invite-id=Provide the ID for an invitation\nbase.command.args.joinMode=Join Mode\nbase.command.args.no-valid-entity={prefix} <red>Error: No valid entity provided</red>\nbase.command.args.optional-faction=If no faction is provided, your own faction will be used\nbase.command.args.permission=Provide a permission as an argument\nbase.command.args.player=Provide a player for this argument\nbase.command.args.power-type=Provide a power type. This can be maximum or accumulated\nbase.command.args.power=Provide a power value\nbase.command.args.priority=Provide a priority. It can manage all ranks below this rank\nbase.command.args.rank-name=Provide the name of a faction rank\nbase.command.args.rank=Assign a rank from your faction\nbase.command.args.zone=Provide a zone\nbase.command.ban.banned-target={prefix} <green>You have successfully banned this player</green>\nbase.command.ban.cant-ban-yourself={prefix} <red>Error: You cannot ban yourself</red>\nbase.command.ban.description=Ban a player, making him unable to join again\nbase.command.category.admin=Admin commands\nbase.command.category.claim=Claim commands\nbase.command.category.general=General commands\nbase.command.category.invites=Invite commands\nbase.command.category.manage=Manage commands\nbase.command.category.members=Member commands\nbase.command.category.permissions=Permission Management commands\nbase.command.claim.claimed-radius={prefix} <green>You successfully claimed <yellow>{successful-claims} / {total-claims}</yellow> in a radius of <yellow>{radius}</yellow> chunks</green>\nbase.command.claim.claimed={prefix} <green>You successfully claimed this chunk</green>\nbase.command.claim.description=Claim a chunk for your faction\nbase.command.create.description=Create a new faction\nbase.command.delete.deleted={prefix} <green>You've successfully deleted your faction</green>\nbase.command.delete.description=Delete your faction\nbase.command.faction-map.description=Display a map of the claimed chunks around you\nbase.command.force.description=Force a player to certain faction-related actions\nbase.command.force.join.already-member={prefix} <red>Error: The player is already a member of a faction</red>\nbase.command.force.join.description=Force a player to join a faction\nbase.command.force.join.error={prefix} <red>Error: The following error has been encountered when force joining the player:</red>\nbase.command.force.join.player-joined={prefix} <green>You've been forced to join the faction <yellow>{faction}</yellow></green>\nbase.command.force.join.success={prefix} <green>You've successfully forced the player to join the faction</green>\nbase.command.force.unclaim.description=Force a faction to unclaim a chunk\nbase.command.force.unclaim.unclaimed={prefix} <green>You've successfully forced the faction to unclaim the chunk</green>\nbase.command.help.category-overview={prefix} <click:run_command:'/f help category:{category-id}'><gold>Ã\u0082Â»</gold> <yellow>{category-name}</yellow> <aqua>-</aqua> <b><green>[Click]</green></b></click>\nbase.command.help.command-details={prefix} <gold>Ã\u0082Â»</gold> <click:suggest_command:'{cmd}'><yellow>{usage}</yellow></click> <aqua>-</aqua> <green>{description}</green>\nbase.command.help.command-not-found=<red>Error: Command not found</red>\nbase.command.help.description=Display the help menu\nbase.command.help.header={prefix} <yellow><b><----|</b> Factions <b>|----></b></yellow>\nbase.command.icon.description=Copy the item in your hand and use it as your faction's icon\nbase.command.icon.invalid-icon={prefix} <red>Error: This item cannot be used as an icon</red>\nbase.command.icon.set-icon={prefix} <green>Your faction's icon has been updated successfully</green>\nbase.command.info.description=Display information about a faction\nbase.command.info.detail={prefix} <gold>Ã\u0082Â»</gold> <click:run_command:'{cmd}'><yellow>{key}</yellow></click> <aqua>{value}</aqua>\nbase.command.info.header={prefix} <yellow><b><----|</b> {faction} <b>|----></b></yellow>\nbase.command.invite.description=Invite a player to join your faction\nbase.command.invite.invited-player={prefix} <green>You invited <yellow>{player}</yellow>. <yellow>{player}</yellow> has <yellow>5 minutes</yellow> to accept</green>\nbase.command.invite.you-have-been-invited={prefix} <green>You've been invited to join <yellow>{faction}</yellow> by <yellow>{inviter}</yellow> as <yellow>{rank}</yellow>. Click <click:run_command:'/f invites'><green>here</green></click> to view your invites</green>\nbase.command.inviteaccept.description=Accept an invitation to join a faction\nbase.command.inviteaccept.joined={prefix} <green>You've successfully joined the faction</green>\nbase.command.invitediscard.deleted={prefix} <green>You've discarded this invite</green>\nbase.command.invitediscard.description=Discard an invitation to join a faction\nbase.command.invites.description=Show all the invites you've received that haven't expired yet\nbase.command.invites.detail={prefix} <gold>Ã\u0082Â»</gold> <yellow>{faction}</yellow> <aqua>Join as {rank}</aqua> <green>Expires in {expires}</green> <click:run_command:'/factions inviteaccept {id}'><green>[Accept]</green></click> <click:run_command:'/factions invitediscard {id}'><red>[Discard]</red></click>\nbase.command.invites.header={prefix} <yellow><b><----|</b> Invites <b>|----></b></yellow>\nbase.command.join.description=Join a faction\nbase.command.join.joined={prefix} <green>You joined the faction</green>\nbase.command.joinMode.changed={prefix} <green>You've successfully changed the join mode to <yellow>{mode}</yellow></green>\nbase.command.joinMode.description=Change the join mode of your faction\nbase.command.kick.description=Kick a player from your faction\nbase.command.kick.kicked={prefix} <green>Player has been kicked successfully</green>\nbase.command.leave.description=Leave your faction\nbase.command.leave.left={prefix} <green>You left your faction</green>\nbase.command.list.description=List all factions\nbase.command.list.faction={prefix} <gold>Ã\u0082Â»</gold> <yellow>{name}</yellow> <aqua>Power: {power}</aqua> <green>Members: {members}</green>\nbase.command.list.header={prefix} <yellow><b><----|</b> Factions <b>|----></b></yellow>\nbase.command.members.detail={prefix} <gold>Ã\u0082Â»</gold> <yellow>{name}</yellow> <aqua>{rank}</aqua> <green>Last Seen: {lastSeen}</green>\nbase.command.members.header={prefix} <yellow><b><----|</b> Members <b>|----></b></yellow>\nbase.command.power.description=Access faction power\nbase.command.power.detail={prefix} <gold>Ã\u0082Â»</gold> <yellow>{key}</yellow> <aqua>{value}</aqua>\nbase.command.power.header={prefix} <yellow><b><----|</b> Power <b>|----></b></yellow>\nbase.command.power.set.description=Set the power of a faction\nbase.command.rank.assign.assigned={prefix} <green>You have successfully assigned the player the rank</green>\nbase.command.rank.assign.description=Assign a player to a rank\nbase.command.rank.create.created={prefix} <green>You have successfully created this rank</green>\nbase.command.rank.create.description=Create a new rank for your faction\nbase.command.rank.default.description=Set the rank new members will join with\nbase.command.rank.default.set={prefix} <green>You have successfully set this rank as the new default rank for members joining</green>\nbase.command.rank.delete.deleted={prefix} <green>You have successfully deleted this rank</green>\nbase.command.rank.delete.description=Delete a rank\nbase.command.rank.delete.rank-is-default={prefix} <red>You cannot delete this rank because it's the default rank for new members</red>\nbase.command.rank.description=Access rank commands\nbase.command.rank.edit.description=Edit permissions for a specific rank via GUI\nbase.command.rank.edit.header={prefix} <yellow><b><----|</b> Permissions <b>|----></b></yellow>\nbase.command.rank.edit.permission-details={prefix} <gold>Ã\u0082Â»</gold> <click:suggest_command:'/factions rank set {rank} {permission} {value}'><yellow>{permission}</yellow></click> <aqua>{value}</aqua>\nbase.command.rank.header={prefix} <yellow><b><----|</b> Ranks <b>|----></b></yellow>\nbase.command.rank.rank-overview={prefix} <gold>Ã\u0082Â»</gold> <click:run_command:'/factions rank edit {name}'><yellow>{name}</yellow></click> <aqua>Priority: {priority}</aqua> <green>Assigned: {countAssignedUsers}</green>\nbase.command.rank.set.description=Set a permission for a rank\nbase.command.rank.set.updated={prefix} <green>Permissions have been set successfully</green>\nbase.command.reload.description=Reload the faction configs\nbase.command.rename.description=Rename your faction\nbase.command.rename.renamed={prefix} <green>You've successfully renamed your faction</green>\nbase.command.unban.description=Unban a player, making him able to join again after being banned\nbase.command.unban.unbanned-target={prefix} <red>Error: You have successfully unbanned this player</red>\nbase.command.unclaim.description=Unclaim a chunk for your faction\nbase.command.unclaim.unclaimed-radius={prefix} <green>You successfully unclaimed <yellow>{successful-claims} / {total-claims}</yellow> chunks in a radius of <yellow>{radius}</yellow> chunks</green>\nbase.command.unclaim.unclaimed={prefix} <green>You've successfully unclaimed this chunk</green>\nbase.command.zone.claim.description=Mark a claim as property of this zone\nbase.command.zone.claimed-radius={prefix} <green>You successfully claimed <yellow>{successful-claims} / {total-claims}</yellow> chunks in a radius of <yellow>{radius}</yellow> chunks with this zone</green>\nbase.command.zone.claimed={prefix} <green>You have successfully claimed this chunk with this zone</green>\nbase.command.zone.description=Access the admin zone commands\nbase.command.zone.unclaim.description=Unmark a claim from any zone associations\nbase.command.zone.unclaimed-radius={prefix} <green>You successfully unclaimed <yellow>{successful-claims} / {total-claims}</yellow> chunks in a radius of <yellow>{radius}</yellow> chunks from any associated zones</green>\nbase.command.zone.unclaimed={prefix} <green>You have successfully unclaimed this land from any associated zones</green>\nbase.commands.args.confirmation-needed={prefix} <red>Error: You need to confirm the command. Use <yellow>/f <command> confirm</yellow></red>\nbase.commands.args.permission=Provide a permission\nbase.commands.bypass.add-bypass={prefix} <green>You've successfully added the bypass for this player</green>\nbase.commands.bypass.description=Add or remove a bypass for a player. A bypass only stays until the next server restart\nbase.commands.bypass.remove-bypass={prefix} <green>You've successfully removed the bypass for this player</green>\nbase.commands.create.created-faction={prefix} <green>Congratulations! Your faction has been successfully created.</green>\nbase.commands.members.description=View your faction's members\nbase.commands.transferowner.description=Transfer the ownership to someone else from your faction\nbase.commands.transferowner.owner-transfered={prefix} <green>You've successfully transferred your ownership to another player. You've been assigned the default rank for this faction</green>\nbase.commands.transferowner.youre-the-owner-now={prefix} <green>You're the new owner of this faction</green>\nbase.exception.claim-radius.max={prefix} <red>Error: The radius must be less than or equal to <yellow>{max-radius}</yellow></red>\nbase.exception.claim-radius.positive={prefix} <red>Error: The radius must be a positive number</red>\nbase.exception.command-not-found={prefix} <red>Error: Command not found</red>\nbase.exception.zone-doesnt-exist={prefix} <red>Error: Zone does not exist</red>\nbase.exceptions.already-banned={prefix} <red>Error: You cannot ban this player as they are already banned</red>\nbase.exceptions.arg-doesnt-match={prefix} <red>Error: The provided argument contains disallowed characters.</red>\nbase.exceptions.arg-is-no-player={prefix} <red>Error: The provided argument is not a player</red>\nbase.exceptions.cant-be-in-faction={prefix} <red>Error: You cannot be in a faction while using this command</red>\nbase.exceptions.cant-claim-this-chunk={prefix} <red>Error: You cannot claim the chunk at <yellow>{x}, {z}</yellow></red>\nbase.exceptions.cant-invite-yourself={prefix} <red>Error: You cannot invite yourself</red>\nbase.exceptions.cant-manage-this-rank={prefix} <red>Error: You cannot manage this rank</red>\nbase.exceptions.command-limit-reached={prefix} <red>Error: You've reached the command limit of <yellow>{limit}</yellow> usages</red>\nbase.exceptions.confirmation-needed={prefix} <red>Error: Confirmation is required to execute this command. Use <yellow>/f <command> confirm</yellow></red>\nbase.exceptions.cooldown={prefix} <red>Error: You need to wait <yellow>{left}</yellow> before using this command again</red>\nbase.exceptions.expected-boolean={prefix} <red>A boolean value was expected</red>\nbase.exceptions.faction-doesnt-exist={prefix} <red>Error: The specified faction does not exist.</red>\nbase.exceptions.faction-doesnt-have-claim={prefix} <red>This claim is not owned by your faction, and you cannot therefore remove it</red>\nbase.exceptions.faction-not-found={prefix} <red>Error: Faction not found</red>\nbase.exceptions.faction-shouldnt-exist={prefix} <red>Error: The faction already exists.</red>\nbase.exceptions.icon.invalid-icon={prefix} <red>Error: The icon's item data would exceed the maximum allowed icon data length and therefore cannot be used</red>\nbase.exceptions.invalid-argument-length={prefix} <red>Error: The provided arguments do not fit the requirements.</red>\nbase.exceptions.max-arg-length-exceeded={prefix} <red>Error: You've exceeded the maximum number of characters allowed in this argument. You are at <gold>{provided}</gold> characters</red>\nbase.exceptions.missing-permissions={prefix} <red>You do not have sufficient permissions. If needed, contact your faction owner for permission</red>\nbase.exceptions.need-faction={prefix} <red>Error: To execute this command, you must be a part of a faction.</red>\nbase.exceptions.needs-to-be-faction-owner={prefix} <red>Error: You need to be the owner of this faction to run this command</red>\nbase.exceptions.not-enough-permissions={prefix} <red>Error: You do not have the required permission</red>\nbase.exceptions.not-enough-power-for-claim={prefix} <red>Your faction doesn't have enough power to claim the chunk at <yellow>{x}, {z}</yellow></red>\nbase.exceptions.permission-not-valid={prefix} <red>Permission is not valid</red>\nbase.exceptions.player-already-owner={prefix} <red>Error: Player already owner</red>\nbase.exceptions.player-cant-leave-is-owner={prefix} <red>This player can't leave this faction, because of their owner rank</red>\nbase.exceptions.player-not-in-faction={prefix} <red>Error: This specified player isn't in your faction</red>\nbase.exceptions.rank-name-exceeds-limit={prefix} <red>Error: Rank name exceeds limit</red>\nbase.exceptions.rank-name-not-matching={prefix} <red>Error: Rank name does not match the required pattern</red>\nbase.exceptions.rank-not-found={prefix} <red>Error: Rank not found</red>\nbase.exceptions.sender-must-be-player={prefix} <red>Error: The sender must be a player</red>\nbase.exceptions.you-are-banned={prefix} <red>Error: You cannot join this faction because you are banned from it</red>\nbase.faction.chunk-claimed={prefix} <green>Your faction has just claimed a chunk at <yellow>{x}, {z}</yellow> in <yellow>{world}</yellow></green>\nbase.faction.chunk-unclaimed={prefix} <green>Your faction has just unclaimed a chunk at <yellow>{x}, {z}</yellow> in <yellow>{world}</yellow></green>\nbase.faction.join-type-changed={prefix} <green>Your faction's join mode has been updated to <yellow>{mode}</yellow></green>\nbase.faction.player-invited={prefix} <green><yellow>{invited}</yellow> has been invited to join your faction by <yellow>{inviter}</yellow>. <yellow>{invited}</yellow> has <yellow>5 minutes</yellow> to accept</green>\nbase.faction.player-joined={prefix} <green><yellow>{player}</yellow> has joined this faction with the rank <yellow>{rank}</yellow></green>\nbase.faction.player-kicked={prefix} <green>Player has been kicked successfully</green>\nbase.faction.player-left={prefix} <green><yellow>{player}</yellow> left your faction</green>\nbase.faction.renamed={prefix} <green>Your faction has been renamed from <yellow>{old}</yellow> to <yellow>{new}</yellow></green>\nbase.faction.unbanned={prefix} <green>The ban for <yellow>{target}</yellow> has been lifted</green>\nbase.messages.command-usage-limit={prefix} <green>You can use this command only <yellow>{left}</yellow> times again</green>\nbase.player-teleport.cancel-message={prefix} <red>You moved while teleporting. Aborted the teleportation</red>\nbase.player-teleport.cancel-title=<red>Teleportation cancelled</red>\nbase.prefix=<hover:show_text:'<dark_gray>Author:</dark_gray> <aqua>Tobero</aqua>'><dark_gray>[</dark_gray><yellow>IF</yellow><dark_gray>]</dark_gray></hover>\nbase.zone.protected={prefix} <red>This chunk is protected by a zone</red>\nbase.zone.safezone=<aqua>Safezone</aqua>\nbase.zone.unmanaged=Unmanaged\nbase.zone.warzone=<dark_red>War zone</dark_red>\nbase.zone.wilderness=<dark_green>Wilderness</dark_green>\nchat.commands.arg.chat-message=The chat message that should get sent into the faction\nchat.commands.chat.description=Toggle the chat your messages will be sent to. If you provide a message, it will send the message into the faction chat\nchat.commands.chat.toggled-faction={prefix} <green>You will now write in the <red>Faction</red> chat</green>\nchat.commands.chat.toggled-global={prefix} <green>You will now write in the <yellow>Global</yellow> chat</green>\nchat.faction.template=<dark_gray>[</dark_gray><red>{faction}</red><dark_gray>]</dark_gray> <white>{player}</white><white>:</white> <white>{message}</white>\nhome.commands.sethome.description=Set your faction's home\nhome.commands.sethome.failed={prefix} <red>Error: You can't set your faction's home here</red>\nhome.commands.sethome.success={prefix} <green>You've successfully set your faction's home</green>\nhome.commands.teleport-home.description=Teleport to your faction's home\nhome.commands.teleport-home.failed={prefix} <red>Error: You can't teleport to your faction's home</red>\nhome.messages.invalid-world={prefix} <red>Error: You can't set the home here, as it's in a invalid world</red>\nhome.messages.not-in-claim={prefix} <red>Error: You can't set the home here, as this isn't in your faction's claim</red>\nhome.messages.teleporting-subtitle=<yellow>Don't move! Teleporting in {time} seconds</yellow>\nhome.messages.teleporting-title=<yellow>Teleporting to Faction Home</yellow>\npower.command.category.power=Power commands\npower.exceptions.not-enough-power={prefix} <red>Your faction doesn't have enough power to afford this action</red>\npower.faction.accumulated-power-changed.chunk-claimed={prefix} <green>Your faction just <red>lost</red> some <aqua>power</aqua> due to <yellow>a chunk getting claimed</yellow>. The current level is at <aqua>{new} / {max}</aqua></green>\npower.faction.accumulated-power-changed.chunk-keep-cost={prefix} <green>Your faction has experienced a <red>loss</red> in <aqua>power</aqua> attributed to the <yellow>maintenance cost of your claims</yellow>. The current level is at <aqua>{new} / {max}</aqua></green>\npower.faction.accumulated-power-changed.max-changed={prefix} <green>Your faction just <red>lost</red> some <aqua>power</aqua> due to <yellow>the max getting lowered</yellow>. The current level is at <aqua>{new}</aqua></green>\npower.faction.accumulated-power-changed.other={prefix} <green>Your faction just changed <aqua>power</aqua> due to <yellow>an external event</yellow>. The current level is at <aqua>{new} / {max}</aqua></green>\npower.faction.accumulated-power-changed.passive-energy-accumulation={prefix} <green>Your faction just gained some <aqua>power</aqua> due to <yellow>passive power accumulation</yellow>. The current level is at <aqua>{new} / {max}</aqua></green>\npower.faction.accumulated-power-changed.player-death={prefix} <green>Your faction just <red>lost</red> power, caused by a <yellow>member's death</yellow>. New power: <aqua>{new} / {max}</aqua></green>\npower.faction.max-power-changed={prefix} <green>Your faction's max power just updated. New max power: <aqua>{new}</aqua></green>\npower.siege.defended={prefix} <blue>The chunk at <yellow>{x}, {z}</yellow> in <yellow>{world}</yellow> got successfully defended. The siege was a failure!</blue>\npower.siege.started={prefix} <blue>The chunk at <yellow>{x}, {z}</yellow> in <yellow>{world}</yellow> got involved in a siege. Get involved in the battle by navigating to it!</blue>\npower.siege.unclaimed={prefix} <blue>The chunk at <yellow>{x}, {z}</yellow> in <yellow>{world}</yellow> got unclaimed. The siege was a victory!</blue>\nwilderness.command.wilderness.description=Teleport to a random location in the wilderness\nwilderness.command.wilderness.failed-to-find={prefix} <red>Error: Failed find a position within the wilderness</red>\nwilderness.command.wilderness.teleported={prefix} <green>You've been teleported to a random location in the wilderness</green>\nwilderness.messages.teleporting-subtitle=<yellow>Don't move! Teleporting in {time} seconds</yellow>\nwilderness.messages.teleporting-title=<dark_green>Teleporting to Wilderness</dark_green>\npower.siege.start={prefix} <green>This claim is <red>raidable</red>. Type <yellow>/f siege</yellow> to start overclaiming this chunk</green>\npower.siege.already-started={prefix} <red>Error: The siege has already started</red>\npower.siege.not-in-claim={prefix} <red>Error: You're not in a claim</red>\npower.siege.own-claim={prefix} <red>Error: You can't siege your own claim</red>\npower.siege.entered={prefix} <green>You've entered the siege</green>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/improved-factions/src/main/resources/languages/messages_en.properties b/improved-factions/src/main/resources/languages/messages_en.properties
--- a/improved-factions/src/main/resources/languages/messages_en.properties	(revision 334f0f846e51cbb04c50096b8e8bd047338df90f)
+++ b/improved-factions/src/main/resources/languages/messages_en.properties	(date 1725812101977)
@@ -201,6 +201,9 @@
 home.messages.teleporting-subtitle=<yellow>Don't move! Teleporting in {time} seconds</yellow>
 home.messages.teleporting-title=<yellow>Teleporting to Faction Home</yellow>
 power.command.category.power=Power commands
+chat.command.spy.description=Toggle the spy mode for the faction chat
+chat.command.spy.disabled={prefix} <green>You've disabled the spy mode for the faction chat</green>
+chat.command.spy.enabled={prefix} <green>You've enabled the spy mode for the faction chat</green>
 power.exceptions.not-enough-power={prefix} <red>Your faction doesn't have enough power to afford this action</red>
 power.faction.accumulated-power-changed.chunk-claimed={prefix} <green>Your faction just <red>lost</red> some <aqua>power</aqua> due to <yellow>a chunk getting claimed</yellow>. The current level is at <aqua>{new} / {max}</aqua></green>
 power.faction.accumulated-power-changed.chunk-keep-cost={prefix} <green>Your faction has experienced a <red>loss</red> in <aqua>power</aqua> attributed to the <yellow>maintenance cost of your claims</yellow>. The current level is at <aqua>{new} / {max}</aqua></green>
Index: improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/commands/ChatSpyCommand.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/commands/ChatSpyCommand.kt b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/commands/ChatSpyCommand.kt
new file mode 100755
--- /dev/null	(date 1725812101998)
+++ b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/commands/ChatSpyCommand.kt	(date 1725812101998)
@@ -0,0 +1,37 @@
+package io.github.toberocat.improvedfactions.modules.chat.commands
+
+import io.github.toberocat.improvedfactions.ImprovedFactionsPlugin
+import io.github.toberocat.improvedfactions.modules.chat.handles.ChatModuleHandle
+import io.github.toberocat.improvedfactions.translation.sendLocalized
+import io.github.toberocat.improvedfactions.utils.command.CommandCategory
+import io.github.toberocat.improvedfactions.utils.command.CommandMeta
+import io.github.toberocat.toberocore.command.PlayerSubCommand
+import io.github.toberocat.toberocore.command.arguments.Argument
+import io.github.toberocat.toberocore.command.options.Options
+import org.bukkit.entity.Player
+import java.util.*
+
+@CommandMeta(
+    description = "chat.command.spy.description",
+    module = "chat",
+    category = CommandCategory.GENERAL_CATEGORY
+)
+class ChatSpyCommand(private val plugin: ImprovedFactionsPlugin,
+                     private val chatHandler: ChatModuleHandle) : PlayerSubCommand("spy") {
+
+    override fun options(): Options = Options.getFromConfig(plugin, label) {options, _ ->
+    }
+
+    override fun arguments(): Array<Argument<*>> = arrayOf()
+
+    override fun handle(player: Player, args: Array<String>): Boolean {
+        if (chatHandler.isSpying(player.uniqueId)) {
+            chatHandler.unspy(player.uniqueId)
+            player.sendLocalized("chat.command.spy.disabled")
+        } else {
+            chatHandler.spy(player.uniqueId)
+            player.sendLocalized("chat.command.spy.enabled")
+        }
+        return true
+    }
+}
\ No newline at end of file
Index: improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/ChatModule.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package io.github.toberocat.improvedfactions.modules.chat\n\nimport io.github.toberocat.improvedfactions.ImprovedFactionsPlugin\nimport io.github.toberocat.improvedfactions.modules.base.BaseModule\nimport io.github.toberocat.improvedfactions.modules.chat.commands.ChatCommand\nimport io.github.toberocat.improvedfactions.modules.chat.handles.ChatModuleHandle\nimport io.github.toberocat.improvedfactions.modules.chat.handles.DummyChatModuleHandle\nimport io.github.toberocat.improvedfactions.modules.chat.impl.ChatModuleHandleImpl\nimport io.github.toberocat.improvedfactions.modules.chat.listener.ChatListener\nimport io.github.toberocat.toberocore.command.CommandExecutor\nimport org.bukkit.entity.Player\n\nobject ChatModule : BaseModule {\n    const val MODULE_NAME = \"chat\"\n    override val moduleName = MODULE_NAME\n\n    var chatModuleHandle: ChatModuleHandle = DummyChatModuleHandle()\n\n    override fun addCommands(plugin: ImprovedFactionsPlugin, executor: CommandExecutor) {\n        executor.addChild(ChatCommand(chatModuleHandle, plugin))\n    }\n\n    override fun onEnable(plugin: ImprovedFactionsPlugin) {\n        chatModuleHandle = ChatModuleHandleImpl()\n        plugin.registerListeners(\n            ChatListener(chatModuleHandle)\n        )\n    }\n\n    fun Player.resetChatMode() = chatModuleHandle.setChatMode(uniqueId, ChatMode.GLOBAL)\n\n    fun Player.sendFactionChat(message: String) = ChatMode.FACTION.sendIntoChat(this, message)\n\n    fun Player.toggleChatMode(): ChatMode {\n        val current = chatModuleHandle.getChatMode(uniqueId).ordinal\n        val values = enumValues<ChatMode>()\n        val nextChatMode = values[(current + 1) % values.size]\n        chatModuleHandle.setChatMode(uniqueId, nextChatMode)\n        return nextChatMode\n    }\n\n    fun chatPair() = MODULE_NAME to this\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/ChatModule.kt b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/ChatModule.kt
--- a/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/ChatModule.kt	(revision 334f0f846e51cbb04c50096b8e8bd047338df90f)
+++ b/improved-factions/src/main/kotlin/io/github/toberocat/improvedfactions/modules/chat/ChatModule.kt	(date 1725812101988)
@@ -3,6 +3,7 @@
 import io.github.toberocat.improvedfactions.ImprovedFactionsPlugin
 import io.github.toberocat.improvedfactions.modules.base.BaseModule
 import io.github.toberocat.improvedfactions.modules.chat.commands.ChatCommand
+import io.github.toberocat.improvedfactions.modules.chat.commands.ChatSpyCommand
 import io.github.toberocat.improvedfactions.modules.chat.handles.ChatModuleHandle
 import io.github.toberocat.improvedfactions.modules.chat.handles.DummyChatModuleHandle
 import io.github.toberocat.improvedfactions.modules.chat.impl.ChatModuleHandleImpl
@@ -18,6 +19,7 @@
 
     override fun addCommands(plugin: ImprovedFactionsPlugin, executor: CommandExecutor) {
         executor.addChild(ChatCommand(chatModuleHandle, plugin))
+        executor.addChild(ChatSpyCommand(plugin, chatModuleHandle))
     }
 
     override fun onEnable(plugin: ImprovedFactionsPlugin) {
